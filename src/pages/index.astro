---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const featuredProjects = await getCollection('projects', ({ data }) => {
	return data.featured === true;
});

// Ordenar por fecha descendente
featuredProjects.sort((a, b) => {
	return new Date(b.data.date || 0).valueOf() - new Date(a.data.date || 0).valueOf();
});
---

<Layout title="Alejandro Gracia | Executive Manager & Tech Architect">
	<main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
		
		<!-- HERO SECTION -->
		<section class="py-20 md:py-32 grid md:grid-cols-2 gap-12 items-center">
			<div>
				<div class="inline-block px-3 py-1 mb-4 text-sm font-semibold tracking-wider text-blue-800 uppercase bg-blue-100 rounded-full">
					Perfil Híbrido
				</div>
				<h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-900 mb-6 leading-tight">
					Arquitecto de <br>
					<span class="text-blue-700">Espacios Físicos</span> y <br>
					<span class="text-indigo-700">Soluciones Digitales</span>
				</h1>
				<p class="text-lg md:text-xl text-slate-600 mb-8 max-w-lg leading-relaxed">
					Executive Manager con +10 años liderando operaciones internacionales. 
					Combino la visión estratégica de un <strong>Country Manager</strong> con la capacidad técnica de un <strong>Desarrollador Senior</strong> para automatizar y optimizar negocios.
				</p>
				<div class="flex flex-wrap gap-4">
					<a href="#executive" class="px-6 py-3 bg-slate-900 text-white font-medium rounded-lg hover:bg-slate-800 transition shadow-lg hover:shadow-xl">
						Ver Perfil Ejecutivo
					</a>
					<a href="#proyectos" class="px-6 py-3 bg-white text-slate-900 border border-slate-300 font-medium rounded-lg hover:bg-slate-50 transition">
						Ver Proyectos
					</a>
				</div>
			</div>
			<div class="relative hidden md:block">
				<!-- Placeholder visual - En el futuro pondremos una foto tuya o un gráfico abstracto de planos/código -->
				<div class="absolute inset-0 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-2xl rotate-3 opacity-10"></div>
				<div class="relative bg-white p-8 rounded-2xl shadow-2xl border border-slate-100">
					<div class="space-y-6">
						<div class="flex items-center space-x-4">
							<div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
								</svg>
							</div>
							<div>
								<h3 class="font-bold text-slate-900">Arquitectura & Gestión</h3>
								<p class="text-sm text-slate-500">Gestión de Obra, P&L, Licitaciones</p>
							</div>
						</div>
						<div class="h-px bg-slate-100"></div>
						<div class="flex items-center space-x-4">
							<div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
								</svg>
							</div>
							<div>
								<h3 class="font-bold text-slate-900">Desarrollo & Automatización</h3>
								<p class="text-sm text-slate-500">Python, IA, Time Series, Fullstack</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- EXECUTIVE SUMMARY (CUADRO DE HONOR) -->
		<section id="executive" class="py-20 border-t border-slate-200">
			<div class="text-center mb-16">
				<h2 class="text-3xl font-bold text-slate-900">Liderazgo Ejecutivo & Operaciones</h2>
				<p class="mt-4 text-slate-600 max-w-2xl mx-auto">
					Gestión de alto nivel con responsabilidad directa sobre resultados, equipos internacionales y proyectos de gran escala.
				</p>
			</div>

			<div class="grid md:grid-cols-3 gap-8">
				<!-- Card 1: Country Manager -->
				<div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition">
					<div class="text-blue-600 font-bold mb-2">2021 — 2023</div>
					<h3 class="text-xl font-bold text-slate-900 mb-1">Country Manager México</h3>
					<div class="text-slate-500 text-sm mb-4">Sivia SA de CV</div>
					<ul class="space-y-3 text-slate-600 text-sm">
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Dirección integral de operaciones y P&L (Cuenta de Resultados).
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Creación y formación de equipos multidisciplinares.
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Implementación de modelos predictivos para optimizar Supply Chain.
						</li>
					</ul>
				</div>

				<!-- Card 2: Project Manager Senior -->
				<div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition">
					<div class="text-blue-600 font-bold mb-2">2016 — 2022</div>
					<h3 class="text-xl font-bold text-slate-900 mb-1">Project Manager Senior</h3>
					<div class="text-slate-500 text-sm mb-4">Imagic Vision S.L.</div>
					<ul class="space-y-3 text-slate-600 text-sm">
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Gestión de proyectos internacionales (Dubai, México, Perú, Panamá).
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Coordinación logística cross-country en mercados complejos.
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Account Manager para cuentas clave como Walmart y BBVA.
						</li>
					</ul>
				</div>

				<!-- Card 3: Consultor Estratégico -->
				<div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition">
					<div class="text-blue-600 font-bold mb-2">2023 — Presente</div>
					<h3 class="text-xl font-bold text-slate-900 mb-1">LATAM Strategy Developer</h3>
					<div class="text-slate-500 text-sm mb-4">Independiente</div>
					<ul class="space-y-3 text-slate-600 text-sm">
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Asesoramiento para entrada de empresas internacionales en México.
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Desarrollo de sistemas de automatización con IA para Broadcast.
						</li>
						<li class="flex items-start">
							<span class="mr-2 text-blue-500">•</span>
							Consultoría híbrida: Negocio + Tecnología.
						</li>
					</ul>
				</div>
			</div>
		</section>

		<!-- FEATURED PROJECTS SECTION -->
		{featuredProjects.length > 0 && (
			<section id="proyectos" class="py-20 border-t border-slate-200">
				<div class="text-center mb-16">
					<h2 class="text-3xl font-bold text-slate-900">Proyectos Destacados</h2>
					<p class="mt-4 text-slate-600 max-w-2xl mx-auto">
						Casos de éxito donde la gestión, la arquitectura y la tecnología se encuentran.
					</p>
				</div>

				<div class="grid gap-12">
					{featuredProjects.map(project => (
						<a href={`/proyectos/${project.id}`} class="group block relative overflow-hidden rounded-2xl bg-slate-900 aspect-[16/9] md:aspect-[21/9]">
							{project.data.cover && (
								<Image 
									src={project.data.cover} 
									alt={project.data.coverAlt || project.data.title}
									class="absolute inset-0 w-full h-full object-cover opacity-80 group-hover:scale-105 transition duration-700 ease-out"
									width={1600}
								/>
							)}
							<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
							
							<div class="absolute bottom-0 left-0 p-8 md:p-12 w-full">
								<div class="flex flex-wrap gap-3 mb-4">
									{project.data.tags?.slice(0, 3).map(tag => (
										<span class="px-3 py-1 bg-white/20 backdrop-blur-sm text-white text-xs font-bold uppercase tracking-wider rounded-full border border-white/30">
											{tag}
										</span>
									))}
								</div>
								<h3 class="text-3xl md:text-5xl font-bold text-white mb-2 group-hover:text-blue-300 transition">{project.data.title}</h3>
								<p class="text-slate-300 text-lg md:text-xl line-clamp-2 max-w-3xl">
									{project.data.description}
								</p>
								<div class="mt-6 inline-flex items-center text-white font-medium group-hover:translate-x-2 transition">
									Ver caso de estudio completo
									<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
										<path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
									</svg>
								</div>
							</div>
						</a>
					))}
				</div>

				<div class="mt-12 text-center">
					<a href="/proyectos" class="inline-flex items-center px-6 py-3 border border-slate-300 shadow-sm text-base font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 transition">
						Ver todos los proyectos
					</a>
				</div>
			</section>
		)}

		<!-- TECH STACK & DUALITY -->
		<section id="tech" class="py-20">
			<div class="bg-slate-900 rounded-2xl p-8 md:p-16 text-white relative overflow-hidden">
				<div class="absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-blue-600 rounded-full blur-3xl opacity-20"></div>
				<div class="relative z-10 grid md:grid-cols-2 gap-12">
					<div>
						<h2 class="text-3xl font-bold mb-6">El valor de la intersección</h2>
						<p class="text-slate-300 mb-6 leading-relaxed">
							No soy solo un gestor que usa Excel, ni un programador aislado del negocio. 
							Mi valor diferencial reside en <strong>construir las herramientas que el negocio necesita</strong> porque entiendo profundamente ambos lados.
						</p>
						<p class="text-slate-300 leading-relaxed">
							Desde desarrollar un ERP a medida cuando el software comercial fallaba, hasta aplicar algoritmos de series temporales para predecir stock en obra.
						</p>
					</div>
					<div>
						<h3 class="text-xl font-bold mb-6 text-blue-400">Stack Tecnológico</h3>
						<div class="grid grid-cols-2 gap-4">
							<div class="p-4 bg-slate-800 rounded-lg">
								<div class="font-bold mb-1">Data & AI</div>
								<div class="text-sm text-slate-400">Python, Pandas, Time Series Analysis, Demand Forecasting</div>
							</div>
							<div class="p-4 bg-slate-800 rounded-lg">
								<div class="font-bold mb-1">Fullstack Dev</div>
								<div class="text-sm text-slate-400">JavaScript, TypeScript, React, Astro, Node.js</div>
							</div>
							<div class="p-4 bg-slate-800 rounded-lg">
								<div class="font-bold mb-1">Arquitectura</div>
								<div class="text-sm text-slate-400">Gestión de Obra, AutoCAD, Control Presupuestario</div>
							</div>
							<div class="p-4 bg-slate-800 rounded-lg">
								<div class="font-bold mb-1">Gestión</div>
								<div class="text-sm text-slate-400">P&L Management, Licitaciones, Liderazgo de Equipos</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		
		<footer class="py-12 text-center text-slate-500 text-sm">
			<p>&copy; {new Date().getFullYear()} Alejandro Gracia. Arquitecto Técnico & Desarrollador.</p>
		</footer>

	</main>
</Layout>